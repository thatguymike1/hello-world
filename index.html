<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator & Wordle</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #000000;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: #f3f3f3;
            border-radius: 10px;
            padding: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .tab {
            padding: 12px 24px;
            background: transparent;
            color: #666;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .tab.active {
            background: #ffffff;
            color: #000000;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .tab:hover:not(.active) {
            color: #000000;
        }

        .app-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex: 1;
        }

        .app {
            display: none;
        }

        .app.active {
            display: block;
        }

        .calculator {
            background: #000000;
            width: 375px;
            max-width: 100vw;
            padding: 20px;
            border-radius: 20px;
        }

        .display {
            background: #000000;
            color: white;
            font-size: 4rem;
            font-weight: 200;
            padding: 20px 20px 40px 20px;
            text-align: right;
            min-height: 120px;
            display: flex;
            align-items: flex-end;
            justify-content: flex-end;
            word-wrap: break-word;
            overflow-wrap: break-word;
            border-radius: 10px;
        }

        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        button {
            background: #333333;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.8rem;
            font-weight: 400;
            height: 80px;
            width: 80px;
            cursor: pointer;
            transition: all 0.1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }

        button:hover {
            background: #4a4a4a;
        }

        button:active {
            background: #5a5a5a;
            transform: scale(0.95);
        }

        .function {
            background: #a6a6a6;
            color: #000000;
        }

        .function:hover {
            background: #b6b6b6;
        }

        .function:active {
            background: #c6c6c6;
        }

        .operator {
            background: #ff9500;
            color: white;
        }

        .operator:hover {
            background: #ffad33;
        }

        .operator:active {
            background: #ffc266;
        }

        .zero {
            grid-column: span 2;
            border-radius: 40px;
            width: 172px;
            justify-content: flex-start;
            padding-left: 30px;
        }

        .zero:hover {
            background: #4a4a4a;
        }

        .zero:active {
            background: #5a5a5a;
        }

        /* Wordle Styles */
        .wordle {
            background: #ffffff;
            width: 400px;
            max-width: 100vw;
            padding: 20px;
            text-align: center;
        }

        .wordle-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #000000;
            letter-spacing: 0.1em;
        }

        .game-board {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 20px;
        }

        .row {
            display: flex;
            gap: 5px;
            justify-content: center;
        }

        .tile {
            width: 62px;
            height: 62px;
            border: 2px solid #d3d6da;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            color: #000000;
            background: #ffffff;
            transition: all 0.2s ease;
            text-transform: uppercase;
        }

        .tile.correct {
            background: #6aaa64;
            border-color: #6aaa64;
            color: #ffffff;
        }

        .tile.present {
            background: #c9b458;
            border-color: #c9b458;
            color: #ffffff;
        }

        .tile.absent {
            background: #787c7e;
            border-color: #787c7e;
            color: #ffffff;
        }

        .tile.filled {
            border-color: #878a8c;
            animation: pop 0.1s ease-in-out;
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .keyboard {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 20px;
        }

        .keyboard-row {
            display: flex;
            gap: 6px;
            justify-content: center;
        }

        .key {
            background: #d3d6da;
            color: #000000;
            border: none;
            border-radius: 4px;
            padding: 12px 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            min-width: 40px;
            transition: all 0.2s ease;
            text-transform: uppercase;
        }

        .key:hover {
            background: #b8bcc0;
        }

        .key.wide {
            min-width: 60px;
        }

        .key.correct {
            background: #6aaa64;
            color: #ffffff;
        }

        .key.present {
            background: #c9b458;
            color: #ffffff;
        }

        .key.absent {
            background: #787c7e;
            color: #ffffff;
        }

        .backspace-icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .message {
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            min-height: 30px;
            color: #000000;
        }

        .message.win {
            color: #6aaa64;
        }

        .message.lose {
            color: #e74c3c;
        }

        /* Nutrition Calculator Styles */
        .nutrition {
            background: #ffffff;
            width: 500px;
            max-width: 100vw;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .nutrition-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 30px;
            color: #000000;
            text-align: center;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid #d3d6da;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.2s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #6aaa64;
        }

        .input-field.error {
            border-color: #e74c3c;
        }

        .error-message {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .calculate-btn {
            width: 100%;
            background: #6aaa64;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s ease;
            margin-top: 20px;
        }

        .calculate-btn:hover {
            background: #5a9a54;
        }

        .calculate-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .results {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 6px;
            display: none;
        }

        .results.show {
            display: block;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            font-weight: 600;
            color: #333;
        }

        .result-value {
            font-weight: bold;
            color: #000;
        }

        .macro-check {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
        }

        .notes {
            margin-top: 15px;
            padding: 10px;
            background: #fff3cd;
            border-radius: 6px;
            font-size: 14px;
            color: #856404;
        }

        .preset-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .preset-btn {
            background: #f8f9fa;
            border: 1px solid #d3d6da;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
            color: #6f42c1;
            font-weight: 600;
        }

        .preset-btn:hover {
            background: #e9ecef;
        }


        /* Wordle Admin Styles */
        .wordle-admin {
            background: #ffffff;
            width: 400px;
            max-width: 100vw;
            padding: 30px;
            text-align: center;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .wordle-admin-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 30px;
            color: #000000;
        }

        .admin-input-group {
            margin-bottom: 20px;
        }

        .admin-label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            font-size: 1.1rem;
        }

        .admin-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #d3d6da;
            border-radius: 8px;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            transition: border-color 0.2s ease;
        }

        .admin-input:focus {
            outline: none;
            border-color: #6aaa64;
        }

        .admin-input.error {
            border-color: #e74c3c;
        }

        .admin-error {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 8px;
            display: none;
        }

        .admin-error.show {
            display: block;
        }

        .admin-btn {
            background: #6aaa64;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s ease;
            margin-top: 20px;
        }

        .admin-btn:hover {
            background: #5a9a54;
        }

        .admin-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .current-word {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            border: 2px solid #e9ecef;
        }

        .current-word-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .current-word-value {
            font-size: 2rem;
            font-weight: bold;
            color: #6aaa64;
            letter-spacing: 0.2em;
        }

        .admin-success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }

        .admin-success.show {
            display: block;
        }

        /* MLS Styles */
        .mls {
            background: #ffffff;
            width: 500px;
            max-width: 100vw;
            padding: 40px;
            text-align: center;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .mls-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #000000;
        }

        .mls-subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 40px;
            line-height: 1.5;
        }

        .mls-button {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: white;
            border: none;
            padding: 25px 60px;
            border-radius: 15px;
            font-size: 1.8rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 30px 0;
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.3);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .mls-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);
        }

        .mls-button:active {
            transform: translateY(0);
        }

        .mls-button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .zoom-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }

        .zoom-button {
            background: #3498db;
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
        }

        .zoom-button:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .zoom-button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }

        .search-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .location-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border: 2px solid #e9ecef;
            display: none;
        }

        .location-info.show {
            display: block;
        }

        .location-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .coordinates {
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            color: #2c3e50;
            background: #ecf0f1;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .mls-status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 500;
            display: none;
        }

        .mls-status.show {
            display: block;
        }

        .mls-status.loading {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .mls-status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .mls-status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .manual-location {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            display: none;
        }

        .manual-location.show {
            display: block;
        }

        .manual-input-group {
            margin-bottom: 15px;
        }

        .manual-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .manual-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #d3d6da;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.2s ease;
        }

        .manual-input:focus {
            outline: none;
            border-color: #e74c3c;
        }

        .manual-button {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s ease;
            margin-top: 10px;
        }

        .manual-button:hover {
            background: #5a6268;
        }

        .icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .results-section {
            margin-top: 30px;
            display: none;
        }

        .results-section.show {
            display: block;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
        }

        .results-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .results-count {
            background: #3498db;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .listing {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .listing:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            border-color: #3498db;
        }

        .listing-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .listing-price {
            font-size: 1.8rem;
            font-weight: bold;
            color: #27ae60;
        }

        .listing-type {
            background: #f39c12;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .listing-address {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .listing-details {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #666;
        }

        .listing-detail {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .listing-description {
            color: #666;
            line-height: 1.4;
            font-size: 0.9rem;
        }

        .listing-link {
            color: #3498db;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .listing-link:hover {
            text-decoration: underline;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.1rem;
        }

        .loading-results {
            text-align: center;
            padding: 40px;
            color: #3498db;
            font-size: 1.1rem;
        }

        .zoom-level {
            background: #ecf0f1;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #2c3e50;
            font-weight: 600;
        }

        @media (max-width: 400px) {
            .calculator {
                width: 100vw;
                padding: 10px;
            }
            
            button {
                height: 70px;
                width: 70px;
                font-size: 1.6rem;
            }
            
            .zero {
                width: 152px;
            }
            
            .display {
                font-size: 3rem;
                padding: 15px 15px 30px 15px;
            }

            .wordle {
                width: 100vw;
                padding: 10px;
            }

            .tile {
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }

            .key {
                padding: 10px 6px;
                font-size: 12px;
                min-width: 35px;
            }

            .key.wide {
                min-width: 50px;
            }

            .nutrition {
                width: 100vw;
                padding: 15px;
            }

            .preset-buttons {
                flex-direction: column;
            }

            .preset-btn {
                width: 100%;
                text-align: center;
            }


            .wordle-admin {
                width: 100vw;
                padding: 20px;
            }

            .admin-input {
                font-size: 1.2rem;
                padding: 12px;
            }

            .current-word-value {
                font-size: 1.5rem;
            }

            .mls {
                width: 100vw;
                padding: 20px;
            }

            .mls-title {
                font-size: 2rem;
            }

            .mls-subtitle {
                font-size: 1rem;
            }

            .mls-button {
                padding: 15px 30px;
                font-size: 1.1rem;
            }

            .coordinates {
                font-size: 1rem;
                padding: 8px;
            }

            .listing-details {
                flex-direction: column;
                gap: 10px;
            }

            .listing-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .results-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="tabs">
        <button class="tab active" onclick="switchTab('calculator')">Calculator</button>
        <button class="tab" onclick="switchTab('wordle')">Wordle</button>
        <button class="tab" onclick="switchTab('nutrition')">Nutrition</button>
        <button class="tab" onclick="switchTab('wordle-admin')">Wordle Admin</button>
        <button class="tab" onclick="switchTab('mls')">MLS</button>
    </div>
    
    <div class="app-container">
        <div class="app active" id="calculator">
            <div class="calculator">
                <div class="display" id="display">0</div>
                <div class="buttons">
                    <button class="function" onclick="clearDisplay()">AC</button>
                    <button class="function" onclick="toggleSign()">+/-</button>
                    <button class="function" onclick="appendOperator('%')">%</button>
                    <button class="operator" onclick="appendOperator('/')">÷</button>
                    
                    <button onclick="appendNumber('7')">7</button>
                    <button onclick="appendNumber('8')">8</button>
                    <button onclick="appendNumber('9')">9</button>
                    <button class="operator" onclick="appendOperator('*')">×</button>
                    
                    <button onclick="appendNumber('4')">4</button>
                    <button onclick="appendNumber('5')">5</button>
                    <button onclick="appendNumber('6')">6</button>
                    <button class="operator" onclick="appendOperator('-')">-</button>
                    
                    <button onclick="appendNumber('1')">1</button>
                    <button onclick="appendNumber('2')">2</button>
                    <button onclick="appendNumber('3')">3</button>
                    <button class="operator" onclick="appendOperator('+')">+</button>
                    
                    <button class="zero" onclick="appendNumber('0')">0</button>
                    <button onclick="appendDecimal()">.</button>
                    <button class="operator" onclick="calculate()">=</button>
                </div>
            </div>
        </div>

        <div class="app" id="wordle">
            <div class="wordle">
                <div class="wordle-title">WORDLE</div>
                <div class="game-board" id="gameBoard"></div>
                <div class="keyboard" id="keyboard"></div>
                <div class="message" id="message"></div>
            </div>
        </div>

        <div class="app" id="nutrition">
            <div class="nutrition">
                <div class="nutrition-title">Macro Calculator</div>
                
                <div class="preset-buttons">
                    <button class="preset-btn" onclick="setPreset(2200, 30, 25, 45)">Balanced (30/25/45)</button>
                    <button class="preset-btn" onclick="setPreset(2000, 35, 25, 40)">High Protein (35/25/40)</button>
                    <button class="preset-btn" onclick="setPreset(1800, 25, 35, 40)">High Fat (25/35/40)</button>
                    <button class="preset-btn" onclick="setPreset(2500, 20, 20, 60)">High Carb (20/20/60)</button>
                </div>

                <div class="input-group">
                    <label class="input-label" for="calories">Daily Calories (kcal)</label>
                    <input type="number" id="calories" class="input-field" placeholder="2200" min="800" max="10000">
                    <div class="error-message" id="calories-error"></div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="proteinPct">Protein %</label>
                    <input type="number" id="proteinPct" class="input-field" placeholder="30" min="0" max="100" step="0.1">
                    <div class="error-message" id="proteinPct-error"></div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="fatPct">Fat %</label>
                    <input type="number" id="fatPct" class="input-field" placeholder="25" min="0" max="100" step="0.1">
                    <div class="error-message" id="fatPct-error"></div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="carbPct">Carbs %</label>
                    <input type="number" id="carbPct" class="input-field" placeholder="45" min="0" max="100" step="0.1">
                    <div class="error-message" id="carbPct-error"></div>
                </div>

                <button class="calculate-btn" onclick="calculateMacros()">Calculate Macros</button>

                <div class="results" id="results">
                    <div class="result-item">
                        <span class="result-label">Protein:</span>
                        <span class="result-value" id="proteinGrams">0.0 g</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Fat:</span>
                        <span class="result-value" id="fatGrams">0.0 g</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Carbs:</span>
                        <span class="result-value" id="carbGrams">0.0 g</span>
                    </div>
                    
                    <div class="macro-check">
                        <div class="result-item">
                            <span class="result-label">Macro kcal:</span>
                            <span class="result-value" id="macroKcal">0.0</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">kcal Difference:</span>
                            <span class="result-value" id="kcalDiff">0.0</span>
                        </div>
                    </div>
                    
                    <div class="notes" id="notes" style="display: none;"></div>
                </div>
            </div>
        </div>


        <div class="app" id="wordle-admin">
            <div class="wordle-admin">
                <div class="wordle-admin-title">Wordle Admin</div>
                
                <div class="admin-input-group">
                    <label class="admin-label" for="newWord">Set New Wordle Answer</label>
                    <input type="text" id="newWord" class="admin-input" placeholder="ENTER 5 LETTER WORD" maxlength="5">
                    <div class="admin-error" id="wordError"></div>
                </div>

                <button class="admin-btn" onclick="setWordleAnswer()">Set Answer</button>

                <div class="admin-success" id="successMessage"></div>

                <div class="current-word">
                    <div class="current-word-label">Current Wordle Answer:</div>
                    <div class="current-word-value" id="currentWord">CORAL</div>
                </div>
            </div>
        </div>

        <div class="app" id="mls">
            <div class="mls">
                <div class="icon">🏠</div>
                <div class="mls-title">MLS Property Search</div>
                <div class="mls-subtitle">
                    Find real estate listings near your current location
                </div>

                <div class="search-controls">
                    <div class="zoom-controls">
                        <button class="zoom-button" onclick="adjustZoom(-1)" title="Narrower Search (Zoom In)">
                            🔍+
                        </button>
                        <div class="zoom-level" id="zoomLevel">Zoom: 16</div>
                        <button class="zoom-button" onclick="adjustZoom(1)" title="Wider Search (Zoom Out)">
                            🔍-
                        </button>
                    </div>
                    
                    <button class="mls-button" onclick="searchProperties()" id="mlsButton">
                        GO
                    </button>
                </div>

                <div class="mls-status" id="mlsStatus"></div>

                <div class="location-info" id="locationInfo">
                    <div class="location-label">Your Location:</div>
                    <div class="coordinates" id="coordinates"></div>
                </div>

                <div class="manual-location" id="manualLocation">
                    <h4 style="margin-bottom: 20px; color: #333;">Enter Location Manually</h4>
                    <div class="manual-input-group">
                        <label class="manual-label" for="latitude">Latitude</label>
                        <input type="number" id="latitude" class="manual-input" placeholder="43.6532" step="any">
                    </div>
                    <div class="manual-input-group">
                        <label class="manual-label" for="longitude">Longitude</label>
                        <input type="number" id="longitude" class="manual-input" placeholder="-79.3832" step="any">
                    </div>
                    <button class="manual-button" onclick="useManualLocation()">Search with These Coordinates</button>
                </div>

                <div class="results-section" id="resultsSection">
                    <div class="results-header">
                        <div class="results-title">Property Listings</div>
                        <div class="results-count" id="resultsCount">0 results</div>
                    </div>
                    <div id="listingsContainer">
                        <!-- Listings will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all apps
            document.querySelectorAll('.app').forEach(app => {
                app.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected app and activate tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Reset Wordle game when switching to it
            if (tabName === 'wordle') {
                resetWordleGame();
            }
        }

        // Calculator variables
        let display = document.getElementById('display');
        let currentInput = '0';
        let operator = null;
        let previousInput = null;
        let shouldResetDisplay = false;
        let isNewCalculation = true;

        // Wordle variables
        let WORDLE_ANSWER = 'CORAL';
        let currentRow = 0;
        let currentTile = 0;
        let gameOver = false;
        let guessedLetters = {};

        // Valid 5-letter English words list
        const VALID_WORDS = new Set([
            'ABOUT', 'ABOVE', 'ABUSE', 'ACTOR', 'ACUTE', 'ADMIT', 'ADOPT', 'ADULT', 'AFTER', 'AGAIN',
            'AGENT', 'AGREE', 'AHEAD', 'ALARM', 'ALBUM', 'ALERT', 'ALIEN', 'ALIGN', 'ALIKE', 'ALIVE',
            'ALLOW', 'ALONE', 'ALONG', 'ALTER', 'AMONG', 'ANGER', 'ANGLE', 'ANGRY', 'APART', 'APPLE',
            'APPLY', 'ARENA', 'ARGUE', 'ARISE', 'ARRAY', 'ASIDE', 'ASSET', 'AVOID', 'AWAKE', 'AWARD',
            'AWARE', 'BADLY', 'BAKER', 'BASES', 'BASIC', 'BEACH', 'BEGAN', 'BEGIN', 'BEING', 'BELOW',
            'BENCH', 'BILLY', 'BIRTH', 'BLACK', 'BLAME', 'BLANK', 'BLIND', 'BLOCK', 'BLOOD', 'BOARD',
            'BOOST', 'BOOTH', 'BOUND', 'BRAIN', 'BRAND', 'BRASS', 'BRAVE', 'BREAD', 'BREAK', 'BREED',
            'BRIEF', 'BRING', 'BROAD', 'BROKE', 'BROWN', 'BUILD', 'BUILT', 'BUYER', 'CABLE', 'CALIF',
            'CARRY', 'CATCH', 'CAUSE', 'CHAIN', 'CHAIR', 'CHAOS', 'CHARM', 'CHART', 'CHASE', 'CHEAP',
            'CHECK', 'CHEST', 'CHIEF', 'CHILD', 'CHINA', 'CHOSE', 'CIVIL', 'CLAIM', 'CLASS', 'CLEAN',
            'CLEAR', 'CLICK', 'CLIMB', 'CLOCK', 'CLOSE', 'CLOUD', 'COACH', 'COAST', 'COULD', 'COUNT',
            'COURT', 'COVER', 'CRAFT', 'CRASH', 'CRAZY', 'CREAM', 'CRIME', 'CROSS', 'CROWD', 'CROWN',
            'CRUDE', 'CURVE', 'CYCLE', 'DAILY', 'DANCE', 'DATED', 'DEALT', 'DEATH', 'DEBUT', 'DELAY',
            'DEPTH', 'DOING', 'DOUBT', 'DOZEN', 'DRAFT', 'DRAMA', 'DRANK', 'DRAWN', 'DREAM', 'DRESS',
            'DRILL', 'DRINK', 'DRIVE', 'DROVE', 'DYING', 'EAGER', 'EARLY', 'EARTH', 'EIGHT', 'ELITE',
            'EMPTY', 'ENEMY', 'ENJOY', 'ENTER', 'ENTRY', 'EQUAL', 'ERROR', 'EVENT', 'EVERY', 'EXACT',
            'EXIST', 'EXTRA', 'FAITH', 'FALSE', 'FAULT', 'FIBER', 'FIELD', 'FIFTH', 'FIFTY', 'FIGHT',
            'FINAL', 'FIRST', 'FIXED', 'FLASH', 'FLEET', 'FLOOR', 'FLUID', 'FOCUS', 'FORCE', 'FORTH',
            'FORTY', 'FORUM', 'FOUND', 'FRAME', 'FRANK', 'FRAUD', 'FRESH', 'FRONT', 'FROST', 'FRUIT',
            'FULLY', 'FUNNY', 'GIANT', 'GIVEN', 'GLASS', 'GLOBE', 'GOING', 'GRACE', 'GRADE', 'GRAND',
            'GRANT', 'GRASS', 'GRAVE', 'GREAT', 'GREEN', 'GROSS', 'GROUP', 'GROWN', 'GUARD', 'GUESS',
            'GUEST', 'GUIDE', 'HAPPY', 'HARRY', 'HEART', 'HEAVY', 'HORSE', 'HOTEL', 'HOUSE', 'HUMAN',
            'IDEAL', 'IMAGE', 'INDEX', 'INNER', 'INPUT', 'ISSUE', 'JAPAN', 'JIMMY', 'JOINT', 'JONES',
            'JUDGE', 'KNOWN', 'LABEL', 'LARGE', 'LASER', 'LATER', 'LAUGH', 'LAYER', 'LEARN', 'LEASE',
            'LEAST', 'LEAVE', 'LEGAL', 'LEVEL', 'LEWIS', 'LIGHT', 'LIMIT', 'LINKS', 'LIVES', 'LOCAL',
            'LOOSE', 'LOWER', 'LUCKY', 'LUNCH', 'LYING', 'MAGIC', 'MAJOR', 'MAKER', 'MARCH', 'MARIA',
            'MATCH', 'MAYBE', 'MAYOR', 'MEANT', 'MEDIA', 'METAL', 'MIGHT', 'MINOR', 'MINUS', 'MIXED',
            'MODEL', 'MONEY', 'MONTH', 'MORAL', 'MOTOR', 'MOUNT', 'MOUSE', 'MOUTH', 'MOVED', 'MOVIE',
            'MUSIC', 'NEEDS', 'NEVER', 'NEWLY', 'NIGHT', 'NOISE', 'NORTH', 'NOTED', 'NOVEL', 'NURSE',
            'OCCUR', 'OCEAN', 'OFFER', 'OFTEN', 'ORDER', 'OTHER', 'OUGHT', 'PAINT', 'PANEL', 'PAPER',
            'PARTY', 'PEACE', 'PETER', 'PHASE', 'PHONE', 'PHOTO', 'PIANO', 'PIECE', 'PILOT', 'PITCH',
            'PLACE', 'PLAIN', 'PLANE', 'PLANT', 'PLATE', 'PLAZA', 'PLOT', 'PLUG', 'PLUS', 'POINT',
            'POUND', 'POWER', 'PRESS', 'PRICE', 'PRIDE', 'PRIME', 'PRINT', 'PRIOR', 'PRIZE', 'PROOF',
            'PROUD', 'PROVE', 'QUEEN', 'QUICK', 'QUIET', 'QUITE', 'RADIO', 'RAISE', 'RANGE', 'RAPID',
            'RATIO', 'REACH', 'READY', 'REALM', 'REBEL', 'REFER', 'RELAX', 'REPAY', 'REPLY', 'RIGHT',
            'RIGID', 'RIVER', 'ROBIN', 'ROGER', 'ROMAN', 'ROUGH', 'ROUND', 'ROUTE', 'ROYAL', 'RURAL',
            'SCALE', 'SCENE', 'SCOPE', 'SCORE', 'SENSE', 'SERVE', 'SETUP', 'SEVEN', 'SHALL', 'SHAPE',
            'SHARE', 'SHARP', 'SHEET', 'SHELF', 'SHELL', 'SHIFT', 'SHINE', 'SHIRT', 'SHOCK', 'SHOOT',
            'SHORT', 'SHOWN', 'SIDED', 'SIGHT', 'SILLY', 'SINCE', 'SIXTH', 'SIXTY', 'SIZED', 'SKILL',
            'SLEEP', 'SLIDE', 'SMALL', 'SMART', 'SMILE', 'SMITH', 'SMOKE', 'SNAKE', 'SNOW', 'SOLAR',
            'SOLID', 'SOLVE', 'SORRY', 'SOUND', 'SOUTH', 'SPACE', 'SPARE', 'SPEAK', 'SPEED', 'SPEND',
            'SPENT', 'SPLIT', 'SPOKE', 'SPORT', 'STAFF', 'STAGE', 'STAKE', 'STAND', 'START', 'STATE',
            'STEAM', 'STEEL', 'STEEP', 'STEER', 'STEPS', 'STICK', 'STILL', 'STOCK', 'STONE', 'STOOD',
            'STORE', 'STORM', 'STORY', 'STRIP', 'STUCK', 'STUDY', 'STUFF', 'STYLE', 'SUGAR', 'SUITE',
            'SUPER', 'SWEET', 'TABLE', 'TAKEN', 'TASTE', 'TAXES', 'TEACH', 'TEETH', 'TERRY', 'TEXAS',
            'THANK', 'THEFT', 'THEIR', 'THEME', 'THERE', 'THESE', 'THICK', 'THING', 'THINK', 'THIRD',
            'THOSE', 'THREE', 'THREW', 'THROW', 'THUMB', 'TIGHT', 'TIMER', 'TIMES', 'TITLE', 'TODAY',
            'TOPIC', 'TOTAL', 'TOUCH', 'TOUGH', 'TOWER', 'TRACK', 'TRADE', 'TRAIN', 'TREAT', 'TREND',
            'TRIAL', 'TRIBE', 'TRICK', 'TRIED', 'TRIES', 'TRUCK', 'TRULY', 'TRUNK', 'TRUST', 'TRUTH',
            'TWICE', 'TWIST', 'TYLER', 'UNDER', 'UNDUE', 'UNION', 'UNITY', 'UNTIL', 'UPPER', 'UPSET',
            'URBAN', 'USAGE', 'USUAL', 'VALID', 'VALUE', 'VIDEO', 'VIRUS', 'VISIT', 'VITAL', 'VOCAL',
            'WASTE', 'WATCH', 'WATER', 'WAVES', 'WAYS', 'WEIRD', 'WELSH', 'WHEEL', 'WHERE', 'WHICH',
            'WHILE', 'WHITE', 'WHOLE', 'WHOSE', 'WOMAN', 'WOMEN', 'WORLD', 'WORRY', 'WORSE', 'WORST',
            'WORTH', 'WOULD', 'WRITE', 'WRONG', 'WROTE', 'YOUNG', 'YOUTH', 'ABACK', 'ABATE', 'ABBEY',
            'ABOUT', 'ABOVE', 'ABUSE', 'ACTOR', 'ACUTE', 'ADMIT', 'ADOPT', 'ADULT', 'AFTER', 'AGAIN',
            'AGENT', 'AGREE', 'AHEAD', 'ALARM', 'ALBUM', 'ALERT', 'ALIEN', 'ALIGN', 'ALIKE', 'ALIVE',
            'ALLOW', 'ALONE', 'ALONG', 'ALTER', 'AMONG', 'ANGER', 'ANGLE', 'ANGRY', 'APART', 'APPLE',
            'APPLY', 'ARENA', 'ARGUE', 'ARISE', 'ARRAY', 'ASIDE', 'ASSET', 'AVOID', 'AWAKE', 'AWARD',
            'AWARE', 'BADLY', 'BAKER', 'BASES', 'BASIC', 'BEACH', 'BEGAN', 'BEGIN', 'BEING', 'BELOW',
            'BENCH', 'BILLY', 'BIRTH', 'BLACK', 'BLAME', 'BLANK', 'BLIND', 'BLOCK', 'BLOOD', 'BOARD',
            'BOOST', 'BOOTH', 'BOUND', 'BRAIN', 'BRAND', 'BRASS', 'BRAVE', 'BREAD', 'BREAK', 'BREED',
            'BRIEF', 'BRING', 'BROAD', 'BROKE', 'BROWN', 'BUILD', 'BUILT', 'BUYER', 'CABLE', 'CALIF',
            'CARRY', 'CATCH', 'CAUSE', 'CHAIN', 'CHAIR', 'CHAOS', 'CHARM', 'CHART', 'CHASE', 'CHEAP',
            'CHECK', 'CHEST', 'CHIEF', 'CHILD', 'CHINA', 'CHOSE', 'CIVIL', 'CLAIM', 'CLASS', 'CLEAN',
            'CLEAR', 'CLICK', 'CLIMB', 'CLOCK', 'CLOSE', 'CLOUD', 'COACH', 'COAST', 'COULD', 'COUNT',
            'COURT', 'COVER', 'CRAFT', 'CRASH', 'CRAZY', 'CREAM', 'CRIME', 'CROSS', 'CROWD', 'CROWN',
            'CRUDE', 'CURVE', 'CYCLE', 'DAILY', 'DANCE', 'DATED', 'DEALT', 'DEATH', 'DEBUT', 'DELAY',
            'DEPTH', 'DOING', 'DOUBT', 'DOZEN', 'DRAFT', 'DRAMA', 'DRANK', 'DRAWN', 'DREAM', 'DRESS',
            'DRILL', 'DRINK', 'DRIVE', 'DROVE', 'DYING', 'EAGER', 'EARLY', 'EARTH', 'EIGHT', 'ELITE',
            'EMPTY', 'ENEMY', 'ENJOY', 'ENTER', 'ENTRY', 'EQUAL', 'ERROR', 'EVENT', 'EVERY', 'EXACT',
            'EXIST', 'EXTRA', 'FAITH', 'FALSE', 'FAULT', 'FIBER', 'FIELD', 'FIFTH', 'FIFTY', 'FIGHT',
            'FINAL', 'FIRST', 'FIXED', 'FLASH', 'FLEET', 'FLOOR', 'FLUID', 'FOCUS', 'FORCE', 'FORTH',
            'FORTY', 'FORUM', 'FOUND', 'FRAME', 'FRANK', 'FRAUD', 'FRESH', 'FRONT', 'FROST', 'FRUIT',
            'FULLY', 'FUNNY', 'GIANT', 'GIVEN', 'GLASS', 'GLOBE', 'GOING', 'GRACE', 'GRADE', 'GRAND',
            'GRANT', 'GRASS', 'GRAVE', 'GREAT', 'GREEN', 'GROSS', 'GROUP', 'GROWN', 'GUARD', 'GUESS',
            'GUEST', 'GUIDE', 'HAPPY', 'HARRY', 'HEART', 'HEAVY', 'HORSE', 'HOTEL', 'HOUSE', 'HUMAN',
            'IDEAL', 'IMAGE', 'INDEX', 'INNER', 'INPUT', 'ISSUE', 'JAPAN', 'JIMMY', 'JOINT', 'JONES',
            'JUDGE', 'KNOWN', 'LABEL', 'LARGE', 'LASER', 'LATER', 'LAUGH', 'LAYER', 'LEARN', 'LEASE',
            'LEAST', 'LEAVE', 'LEGAL', 'LEVEL', 'LEWIS', 'LIGHT', 'LIMIT', 'LINKS', 'LIVES', 'LOCAL',
            'LOOSE', 'LOWER', 'LUCKY', 'LUNCH', 'LYING', 'MAGIC', 'MAJOR', 'MAKER', 'MARCH', 'MARIA',
            'MATCH', 'MAYBE', 'MAYOR', 'MEANT', 'MEDIA', 'METAL', 'MIGHT', 'MINOR', 'MINUS', 'MIXED',
            'MODEL', 'MONEY', 'MONTH', 'MORAL', 'MOTOR', 'MOUNT', 'MOUSE', 'MOUTH', 'MOVED', 'MOVIE',
            'MUSIC', 'NEEDS', 'NEVER', 'NEWLY', 'NIGHT', 'NOISE', 'NORTH', 'NOTED', 'NOVEL', 'NURSE',
            'OCCUR', 'OCEAN', 'OFFER', 'OFTEN', 'ORDER', 'OTHER', 'OUGHT', 'PAINT', 'PANEL', 'PAPER',
            'PARTY', 'PEACE', 'PETER', 'PHASE', 'PHONE', 'PHOTO', 'PIANO', 'PIECE', 'PILOT', 'PITCH',
            'PLACE', 'PLAIN', 'PLANE', 'PLANT', 'PLATE', 'PLAZA', 'PLOT', 'PLUG', 'PLUS', 'POINT',
            'POUND', 'POWER', 'PRESS', 'PRICE', 'PRIDE', 'PRIME', 'PRINT', 'PRIO', 'PRIZE', 'PROOF',
            'PROUD', 'PROVE', 'QUEEN', 'QUICK', 'QUIET', 'QUITE', 'RADIO', 'RAISE', 'RANGE', 'RAPID',
            'RATIO', 'REACH', 'READY', 'REALM', 'REBEL', 'REFER', 'RELAX', 'REPAY', 'REPLY', 'RIGHT',
            'RIGID', 'RIVER', 'ROBIN', 'ROGER', 'ROMAN', 'ROUGH', 'ROUND', 'ROUTE', 'ROYAL', 'RURAL',
            'SCALE', 'SCENE', 'SCOPE', 'SCORE', 'SENSE', 'SERVE', 'SETUP', 'SEVEN', 'SHALL', 'SHAPE',
            'SHARE', 'SHARP', 'SHEET', 'SHELF', 'SHELL', 'SHIFT', 'SHINE', 'SHIRT', 'SHOCK', 'SHOOT',
            'SHORT', 'SHOWN', 'SIDED', 'SIGHT', 'SILLY', 'SINCE', 'SIXTH', 'SIXTY', 'SIZED', 'SKILL',
            'SLEEP', 'SLIDE', 'SMALL', 'SMART', 'SMILE', 'SMITH', 'SMOKE', 'SNAKE', 'SNOW', 'SOLAR',
            'SOLID', 'SOLVE', 'SORRY', 'SOUND', 'SOUTH', 'SPACE', 'SPARE', 'SPEAK', 'SPEED', 'SPEND',
            'SPENT', 'SPLIT', 'SPOKE', 'SPORT', 'STAFF', 'STAGE', 'STAKE', 'STAND', 'START', 'STATE',
            'STEAM', 'STEEL', 'STEEP', 'STEER', 'STEPS', 'STICK', 'STILL', 'STOCK', 'STONE', 'STOOD',
            'STORE', 'STORM', 'STORY', 'STRIP', 'STUCK', 'STUDY', 'STUFF', 'STYLE', 'SUGAR', 'SUITE',
            'SUPER', 'SWEET', 'TABLE', 'TAKEN', 'TASTE', 'TAXES', 'TEACH', 'TEETH', 'TERRY', 'TEXAS',
            'THANK', 'THEFT', 'THEIR', 'THEME', 'THERE', 'THESE', 'THICK', 'THING', 'THINK', 'THIRD',
            'THOSE', 'THREE', 'THREW', 'THROW', 'THUMB', 'TIGHT', 'TIMER', 'TIMES', 'TITLE', 'TODAY',
            'TOPIC', 'TOTAL', 'TOUCH', 'TOUGH', 'TOWER', 'TRACK', 'TRADE', 'TRAIN', 'TREAT', 'TREND',
            'TRIAL', 'TRIBE', 'TRICK', 'TRIED', 'TRIES', 'TRUCK', 'TRULY', 'TRUNK', 'TRUST', 'TRUTH',
            'TWICE', 'TWIST', 'TYLER', 'UNDER', 'UNDUE', 'UNION', 'UNITY', 'UNTIL', 'UPPER', 'UPSET',
            'URBAN', 'USAGE', 'USUAL', 'VALID', 'VALUE', 'VIDEO', 'VIRUS', 'VISIT', 'VITAL', 'VOCAL',
            'WASTE', 'WATCH', 'WATER', 'WAVES', 'WAYS', 'WEIRD', 'WELSH', 'WHEEL', 'WHERE', 'WHICH',
            'WHILE', 'WHITE', 'WHOLE', 'WHOSE', 'WOMAN', 'WOMEN', 'WORLD', 'WORRY', 'WORSE', 'WORST',
            'WORTH', 'WOULD', 'WRITE', 'WRONG', 'WROTE', 'YOUNG', 'YOUTH'
        ]);

        // Word validation function
        function isValidWord(word) {
            return VALID_WORDS.has(word.toUpperCase());
        }

        // Reset Wordle game
        function resetWordleGame() {
            currentRow = 0;
            currentTile = 0;
            gameOver = false;
            guessedLetters = {};
            
            // Clear all tiles
            for (let row = 0; row < 6; row++) {
                for (let tile = 0; tile < 5; tile++) {
                    const tileElement = document.getElementById(`tile-${row}-${tile}`);
                    if (tileElement) {
                        tileElement.textContent = '';
                        tileElement.className = 'tile';
                    }
                }
            }
            
            // Reset keyboard colors
            const keys = document.querySelectorAll('.key');
            keys.forEach(key => {
                key.classList.remove('correct', 'present', 'absent');
            });
            
            // Clear message
            const message = document.getElementById('message');
            message.textContent = '';
            message.className = 'message';
        }

        // Initialize Wordle game
        function initWordle() {
            const gameBoard = document.getElementById('gameBoard');
            const keyboard = document.getElementById('keyboard');
            
            // Create game board (6 rows, 5 tiles each)
            for (let row = 0; row < 6; row++) {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'row';
                rowDiv.id = `row-${row}`;
                
                for (let tile = 0; tile < 5; tile++) {
                    const tileDiv = document.createElement('div');
                    tileDiv.className = 'tile';
                    tileDiv.id = `tile-${row}-${tile}`;
                    rowDiv.appendChild(tileDiv);
                }
                
                gameBoard.appendChild(rowDiv);
            }
            
            // Create keyboard
            const keyboardLayout = [
                ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],
                ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],
                ['ENTER', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', 'BACKSPACE']
            ];
            
            keyboardLayout.forEach((row, rowIndex) => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'keyboard-row';
                
                row.forEach(key => {
                    const keyDiv = document.createElement('button');
                    keyDiv.className = 'key';
                    
                    if (key === 'BACKSPACE') {
                        keyDiv.innerHTML = `
                            <svg class="backspace-icon" viewBox="0 0 24 24">
                                <path d="M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z"/>
                            </svg>
                        `;
                        keyDiv.classList.add('wide');
                    } else {
                        keyDiv.textContent = key;
                        if (key === 'ENTER') {
                            keyDiv.classList.add('wide');
                        }
                    }
                    
                    keyDiv.onclick = () => handleKeyPress(key);
                    rowDiv.appendChild(keyDiv);
                });
                
                keyboard.appendChild(rowDiv);
            });
        }

        function handleKeyPress(key) {
            if (gameOver) return;
            
            if (key === 'BACKSPACE') {
                if (currentTile > 0) {
                    currentTile--;
                    const tile = document.getElementById(`tile-${currentRow}-${currentTile}`);
                    tile.textContent = '';
                    tile.classList.remove('filled');
                }
            } else if (key === 'ENTER') {
                if (currentTile === 5) {
                    checkGuess();
                }
            } else if (key.length === 1 && currentTile < 5) {
                const tile = document.getElementById(`tile-${currentRow}-${currentTile}`);
                tile.textContent = key.toUpperCase();
                tile.classList.add('filled');
                currentTile++;
            }
        }

        function checkGuess() {
            const guess = [];
            for (let i = 0; i < 5; i++) {
                const tile = document.getElementById(`tile-${currentRow}-${i}`);
                guess.push(tile.textContent);
            }
            
            const guessWord = guess.join('');
            
            // Validate the word
            if (!isValidWord(guessWord)) {
                // Show error message
                const message = document.getElementById('message');
                message.textContent = 'Not a valid word';
                message.className = 'message';
                message.style.color = '#e74c3c';
                
                // Shake animation for invalid word
                const row = document.getElementById(`row-${currentRow}`);
                row.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => {
                    row.style.animation = '';
                }, 500);
                
                return;
            }
            
            const answer = WORDLE_ANSWER.split('');
            const guessArray = guessWord.split('');
            
            // Check each letter
            const result = [];
            const answerCopy = [...answer];
            
            // First pass: mark correct letters
            for (let i = 0; i < 5; i++) {
                if (guessArray[i] === answerCopy[i]) {
                    result[i] = 'correct';
                    answerCopy[i] = null;
                } else {
                    result[i] = null;
                }
            }
            
            // Second pass: mark present letters
            for (let i = 0; i < 5; i++) {
                if (result[i] === null) {
                    const letterIndex = answerCopy.indexOf(guessArray[i]);
                    if (letterIndex !== -1) {
                        result[i] = 'present';
                        answerCopy[letterIndex] = null;
                    } else {
                        result[i] = 'absent';
                    }
                }
            }
            
            // Update tile colors
            for (let i = 0; i < 5; i++) {
                const tile = document.getElementById(`tile-${currentRow}-${i}`);
                tile.classList.add(result[i]);
                
                // Update keyboard colors
                const keys = document.querySelectorAll('.key');
                keys.forEach(k => {
                    const keyText = k.textContent.trim();
                    if (keyText === guessArray[i]) {
                        if (result[i] === 'correct') {
                            k.classList.add('correct');
                        } else if (result[i] === 'present' && !k.classList.contains('correct')) {
                            k.classList.add('present');
                        } else if (result[i] === 'absent' && !k.classList.contains('correct') && !k.classList.contains('present')) {
                            k.classList.add('absent');
                        }
                    }
                });
            }
            
            // Check win condition
            if (guessWord === WORDLE_ANSWER) {
                gameOver = true;
                document.getElementById('message').textContent = 'Congratulations! You won!';
                document.getElementById('message').classList.add('win');
            } else if (currentRow === 5) {
                gameOver = true;
                document.getElementById('message').textContent = `Game Over! The word was ${WORDLE_ANSWER}`;
                document.getElementById('message').classList.add('lose');
            } else {
                currentRow++;
                currentTile = 0;
            }
        }

        // Keyboard event listener for Wordle
        document.addEventListener('keydown', function(event) {
            if (document.getElementById('wordle').classList.contains('active')) {
                const key = event.key.toUpperCase();
                if (key === 'BACKSPACE') {
                    handleKeyPress('BACKSPACE');
                } else if (key === 'ENTER') {
                    handleKeyPress('ENTER');
                } else if (key >= 'A' && key <= 'Z') {
                    handleKeyPress(key);
                }
            }
        });

        // Initialize Wordle when page loads
        window.addEventListener('load', initWordle);

        // Nutrition Calculator Functions
        function setPreset(calories, protein, fat, carbs) {
            document.getElementById('calories').value = calories;
            document.getElementById('proteinPct').value = protein;
            document.getElementById('fatPct').value = fat;
            document.getElementById('carbPct').value = carbs;
            clearErrors();
        }

        function clearErrors() {
            const errorElements = document.querySelectorAll('.error-message');
            errorElements.forEach(el => {
                el.classList.remove('show');
                el.textContent = '';
            });
            
            const inputFields = document.querySelectorAll('.input-field');
            inputFields.forEach(field => {
                field.classList.remove('error');
            });
        }

        function showError(fieldId, message) {
            const field = document.getElementById(fieldId);
            const errorElement = document.getElementById(fieldId + '-error');
            
            field.classList.add('error');
            errorElement.textContent = message;
            errorElement.classList.add('show');
        }

        function validateInputs() {
            clearErrors();
            const errors = [];
            
            // Get input values
            const calories = document.getElementById('calories').value;
            const proteinPct = document.getElementById('proteinPct').value;
            const fatPct = document.getElementById('fatPct').value;
            const carbPct = document.getElementById('carbPct').value;
            
            // Validate calories
            if (!calories || isNaN(calories) || !Number.isInteger(parseFloat(calories))) {
                errors.push({ field: 'calories', message: 'Calories is required and must be a number.' });
            } else {
                const caloriesNum = parseInt(calories);
                if (caloriesNum < 800 || caloriesNum > 10000) {
                    errors.push({ field: 'calories', message: 'Calories must be an integer between 800 and 10,000.' });
                }
            }
            
            // Validate percentages
            const percentages = [
                { field: 'proteinPct', value: proteinPct, name: 'Protein%' },
                { field: 'fatPct', value: fatPct, name: 'Fat%' },
                { field: 'carbPct', value: carbPct, name: 'Carbs%' }
            ];
            
            percentages.forEach(pct => {
                if (!pct.value || isNaN(pct.value)) {
                    errors.push({ field: pct.field, message: `${pct.name} is required and must be a number.` });
                } else {
                    const num = parseFloat(pct.value);
                    if (num < 0 || num > 100) {
                        errors.push({ field: pct.field, message: `${pct.name} must be a number between 0 and 100.` });
                    }
                }
            });
            
            // Validate sum of percentages
            if (errors.length === 0) {
                const sum = parseFloat(proteinPct) + parseFloat(fatPct) + parseFloat(carbPct);
                if (Math.abs(sum - 100) > 0.5) {
                    errors.push({ field: 'sum', message: 'Protein% + Fat% + Carbs% must total 100 (±0.5).' });
                }
            }
            
            // Show errors
            errors.forEach(error => {
                if (error.field === 'sum') {
                    // Show sum error on all percentage fields
                    showError('proteinPct', error.message);
                    showError('fatPct', error.message);
                    showError('carbPct', error.message);
                } else {
                    showError(error.field, error.message);
                }
            });
            
            return errors.length === 0;
        }

        function round1(x) {
            return Math.round(x * 10) / 10;
        }

        function calculateMacros() {
            if (!validateInputs()) {
                document.getElementById('results').classList.remove('show');
                return;
            }
            
            // Get validated inputs
            const calories = parseInt(document.getElementById('calories').value);
            const proteinPct = parseFloat(document.getElementById('proteinPct').value);
            const fatPct = parseFloat(document.getElementById('fatPct').value);
            const carbPct = parseFloat(document.getElementById('carbPct').value);
            
            // Calculate grams
            const proteinGrams = round1((calories * (proteinPct / 100)) / 4);
            const fatGrams = round1((calories * (fatPct / 100)) / 9);
            const carbGrams = round1((calories * (carbPct / 100)) / 4);
            
            // Macro kcal check
            const macroKcal = round1(proteinGrams * 4 + fatGrams * 9 + carbGrams * 4);
            const kcalDiff = round1(macroKcal - calories);
            
            // Display results
            document.getElementById('proteinGrams').textContent = proteinGrams + ' g';
            document.getElementById('fatGrams').textContent = fatGrams + ' g';
            document.getElementById('carbGrams').textContent = carbGrams + ' g';
            document.getElementById('macroKcal').textContent = macroKcal;
            document.getElementById('kcalDiff').textContent = kcalDiff;
            
            // Handle notes
            const notesElement = document.getElementById('notes');
            if (Math.abs(kcalDiff) <= 1) {
                notesElement.textContent = 'Totals may differ by up to 1 kcal due to rounding.';
                notesElement.style.display = 'block';
            } else {
                notesElement.style.display = 'none';
            }
            
            // Show results
            document.getElementById('results').classList.add('show');
        }

        // Wordle Admin Functions
        function setWordleAnswer() {
            const input = document.getElementById('newWord');
            const word = input.value.trim().toUpperCase();
            const errorElement = document.getElementById('wordError');
            const successElement = document.getElementById('successMessage');
            
            // Clear previous messages
            errorElement.classList.remove('show');
            successElement.classList.remove('show');
            input.classList.remove('error');
            
            // Validate input
            if (!word) {
                showAdminError('Please enter a word');
                return;
            }
            
            if (word.length !== 5) {
                showAdminError('Word must be exactly 5 letters');
                return;
            }
            
            if (!/^[A-Z]+$/.test(word)) {
                showAdminError('Word must contain only letters');
                return;
            }
            
            if (!isValidWord(word)) {
                showAdminError('Word must be a valid English word');
                return;
            }
            
            // Set the new answer
            WORDLE_ANSWER = word;
            
            // Update display
            document.getElementById('currentWord').textContent = word;
            
            // Show success message
            successElement.textContent = `Wordle answer set to "${word}" successfully!`;
            successElement.classList.add('show');
            
            // Clear input
            input.value = '';
            
            // Reset Wordle game if it's currently active
            if (document.getElementById('wordle').classList.contains('active')) {
                resetWordleGame();
            }
        }
        
        function showAdminError(message) {
            const input = document.getElementById('newWord');
            const errorElement = document.getElementById('wordError');
            
            input.classList.add('error');
            errorElement.textContent = message;
            errorElement.classList.add('show');
        }
        
        // Auto-format input to uppercase
        document.addEventListener('DOMContentLoaded', function() {
            const wordInput = document.getElementById('newWord');
            if (wordInput) {
                wordInput.addEventListener('input', function(e) {
                    e.target.value = e.target.value.toUpperCase();
                });
            }
        });

        // MLS Variables
        let currentZoom = 16;
        let currentLocation = null;

        // MLS Functions
        function searchProperties() {
            const button = document.getElementById('mlsButton');
            const status = document.getElementById('mlsStatus');
            const resultsSection = document.getElementById('resultsSection');

            // Hide previous results
            status.classList.remove('show');
            resultsSection.classList.remove('show');

            // Show loading state
            button.disabled = true;
            button.textContent = 'SEARCHING...';
            showStatus('Getting your location and searching for properties...', 'loading');

            // Check if geolocation is supported
            if (!navigator.geolocation) {
                showStatus('Geolocation is not supported by this browser.', 'error');
                showManualLocationOption();
                resetButton();
                return;
            }

            // Get current position
            navigator.geolocation.getCurrentPosition(
                function(position) {
                    // Success
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    
                    currentLocation = { lat, lng };
                    
                    // Show location info
                    document.getElementById('coordinates').textContent = 
                        `Latitude: ${lat.toFixed(4)}, Longitude: ${lng.toFixed(4)}`;
                    
                    document.getElementById('locationInfo').classList.add('show');
                    
                    // Search for properties
                    searchForProperties(lat, lng);
                },
                function(error) {
                    // Error
                    let errorMessage = '';
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage = 'Location access denied. Please allow location access to use this feature.';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage = 'Location information is unavailable.';
                            break;
                        case error.TIMEOUT:
                            errorMessage = 'Location request timed out.';
                            break;
                        default:
                            errorMessage = 'An unknown error occurred while retrieving location.';
                            break;
                    }
                    
                    showStatus(errorMessage, 'error');
                    showManualLocationOption();
                    resetButton();
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 300000 // 5 minutes
                }
            );
        }

        function adjustZoom(direction) {
            const newZoom = currentZoom + direction;
            if (newZoom >= 10 && newZoom <= 20) {
                currentZoom = newZoom;
                document.getElementById('zoomLevel').textContent = `Zoom: ${currentZoom}`;
                
                // If we have a location and results are shown, re-search
                if (currentLocation && document.getElementById('resultsSection').classList.contains('show')) {
                    searchForProperties(currentLocation.lat, currentLocation.lng);
                }
            }
        }

        function searchForProperties(lat, lng) {
            showStatus('Searching for properties in your area...', 'loading');
            
            // Simulate API call delay
            setTimeout(() => {
                // Generate mock property data
                const properties = generateMockProperties(lat, lng, currentZoom);
                displayProperties(properties);
                showStatus(`Found ${properties.length} properties near your location`, 'success');
                resetButton();
            }, 2000);
        }

        function generateMockProperties(lat, lng, zoom) {
            // Generate mock properties based on location and zoom level
            const propertyCount = Math.max(3, 15 - zoom); // More properties with wider zoom
            const properties = [];
            
            const propertyTypes = ['House', 'Condo', 'Townhouse', 'Apartment'];
            const descriptions = [
                'Beautiful family home in quiet neighborhood',
                'Modern condo with stunning city views',
                'Charming townhouse with private garden',
                'Spacious apartment near downtown',
                'Renovated home with updated kitchen',
                'Luxury condo with premium amenities'
            ];
            
            for (let i = 0; i < propertyCount; i++) {
                // Generate random offset from center point
                const latOffset = (Math.random() - 0.5) * (0.01 / zoom) * 10;
                const lngOffset = (Math.random() - 0.5) * (0.01 / zoom) * 10;
                
                const price = Math.floor(Math.random() * 2000000) + 300000;
                const beds = Math.floor(Math.random() * 4) + 1;
                const baths = Math.floor(Math.random() * 3) + 1;
                const sqft = Math.floor(Math.random() * 2000) + 800;
                
                properties.push({
                    id: i + 1,
                    price: price,
                    type: propertyTypes[Math.floor(Math.random() * propertyTypes.length)],
                    address: `${Math.floor(Math.random() * 9999) + 1} ${['Main St', 'Oak Ave', 'Pine Rd', 'Elm St', 'Cedar Blvd'][Math.floor(Math.random() * 5)]}`,
                    beds: beds,
                    baths: baths,
                    sqft: sqft,
                    description: descriptions[Math.floor(Math.random() * descriptions.length)],
                    lat: lat + latOffset,
                    lng: lng + lngOffset
                });
            }
            
            return properties;
        }

        function displayProperties(properties) {
            const resultsSection = document.getElementById('resultsSection');
            const resultsCount = document.getElementById('resultsCount');
            const listingsContainer = document.getElementById('listingsContainer');
            
            // Update results count
            resultsCount.textContent = `${properties.length} results`;
            
            // Clear previous listings
            listingsContainer.innerHTML = '';
            
            if (properties.length === 0) {
                listingsContainer.innerHTML = '<div class="no-results">No properties found in this area. Try adjusting your zoom level.</div>';
            } else {
                properties.forEach(property => {
                    const listing = createListingElement(property);
                    listingsContainer.appendChild(listing);
                });
            }
            
            resultsSection.classList.add('show');
        }

        function createListingElement(property) {
            const listing = document.createElement('div');
            listing.className = 'listing';
            listing.onclick = () => openPropertyDetails(property);
            
            listing.innerHTML = `
                <div class="listing-header">
                    <div class="listing-price">$${property.price.toLocaleString()}</div>
                    <div class="listing-type">${property.type}</div>
                </div>
                <div class="listing-address">${property.address}</div>
                <div class="listing-details">
                    <div class="listing-detail">
                        <span>🛏️</span>
                        <span>${property.beds} bed${property.beds > 1 ? 's' : ''}</span>
                    </div>
                    <div class="listing-detail">
                        <span>🛁</span>
                        <span>${property.baths} bath${property.baths > 1 ? 's' : ''}</span>
                    </div>
                    <div class="listing-detail">
                        <span>📐</span>
                        <span>${property.sqft.toLocaleString()} sq ft</span>
                    </div>
                </div>
                <div class="listing-description">${property.description}</div>
            `;
            
            return listing;
        }

        function openPropertyDetails(property) {
            // Open MLS.ca with the specific property location
            const mlsUrl = `https://www.realtor.ca/map#ZoomLevel=18&Latitude=${property.lat}&Longitude=${property.lng}`;
            window.open(mlsUrl, '_blank');
        }

        function useManualLocation() {
            const latInput = document.getElementById('latitude');
            const lngInput = document.getElementById('longitude');

            const lat = parseFloat(latInput.value);
            const lng = parseFloat(lngInput.value);

            // Validate inputs
            if (isNaN(lat) || isNaN(lng)) {
                showStatus('Please enter valid latitude and longitude values.', 'error');
                return;
            }

            if (lat < -90 || lat > 90) {
                showStatus('Latitude must be between -90 and 90 degrees.', 'error');
                return;
            }

            if (lng < -180 || lng > 180) {
                showStatus('Longitude must be between -180 and 180 degrees.', 'error');
                return;
            }

            currentLocation = { lat, lng };

            // Show coordinates
            document.getElementById('coordinates').textContent = 
                `Latitude: ${lat.toFixed(4)}, Longitude: ${lng.toFixed(4)}`;
            
            document.getElementById('locationInfo').classList.add('show');
            document.getElementById('manualLocation').classList.remove('show');

            // Search for properties
            searchForProperties(lat, lng);
        }

        function showStatus(message, type) {
            const status = document.getElementById('mlsStatus');
            status.textContent = message;
            status.className = `mls-status show ${type}`;
        }

        function showManualLocationOption() {
            document.getElementById('manualLocation').classList.add('show');
        }

        function resetButton() {
            const button = document.getElementById('mlsButton');
            button.disabled = false;
            button.textContent = 'GO';
        }

        function updateDisplay() {
            // Format large numbers with commas
            if (currentInput === 'Error') {
                display.textContent = currentInput;
                return;
            }
            
            const num = parseFloat(currentInput);
            if (isNaN(num)) {
                display.textContent = currentInput;
                return;
            }
            
            // Format the number for display
            if (Math.abs(num) >= 1e15) {
                display.textContent = num.toExponential(6);
            } else if (Math.abs(num) < 1e-6 && num !== 0) {
                display.textContent = num.toExponential(6);
            } else {
                // Remove trailing zeros and unnecessary decimal points
                let formatted = num.toString();
                if (formatted.includes('.')) {
                    formatted = formatted.replace(/\.?0+$/, '');
                }
                display.textContent = formatted;
            }
        }

        function clearDisplay() {
            currentInput = '0';
            operator = null;
            previousInput = null;
            shouldResetDisplay = false;
            isNewCalculation = true;
            updateDisplay();
        }

        function toggleSign() {
            if (currentInput !== '0' && currentInput !== 'Error') {
                currentInput = currentInput.startsWith('-') 
                    ? currentInput.substring(1) 
                    : '-' + currentInput;
                updateDisplay();
            }
        }

        function appendNumber(num) {
            if (shouldResetDisplay || isNewCalculation) {
                currentInput = num;
                shouldResetDisplay = false;
                isNewCalculation = false;
            } else {
                currentInput = currentInput === '0' ? num : currentInput + num;
            }
            updateDisplay();
        }

        function appendDecimal() {
            if (shouldResetDisplay || isNewCalculation) {
                currentInput = '0.';
                shouldResetDisplay = false;
                isNewCalculation = false;
            } else if (currentInput.indexOf('.') === -1) {
                currentInput += '.';
            }
            updateDisplay();
        }

        function appendOperator(op) {
            if (operator && !shouldResetDisplay && !isNewCalculation) {
                calculate();
            }
            
            operator = op;
            previousInput = currentInput;
            shouldResetDisplay = true;
            isNewCalculation = false;
        }

        function calculate() {
            if (operator && previousInput !== null) {
                const prev = parseFloat(previousInput);
                const current = parseFloat(currentInput);
                let result;

                switch (operator) {
                    case '+':
                        result = prev + current;
                        break;
                    case '-':
                        result = prev - current;
                        break;
                    case '*':
                        result = prev * current;
                        break;
                    case '/':
                        if (current === 0) {
                            currentInput = 'Error';
                            updateDisplay();
                            return;
                        }
                        result = prev / current;
                        break;
                    case '%':
                        result = prev % current;
                        break;
                    default:
                        return;
                }

                // Handle very large or very small numbers
                if (isFinite(result)) {
                    currentInput = result.toString();
                } else {
                    currentInput = 'Error';
                }
                
                operator = null;
                previousInput = null;
                shouldResetDisplay = true;
                isNewCalculation = true;
                updateDisplay();
            }
        }

        // Calculator keyboard support
        document.addEventListener('keydown', function(event) {
            if (document.getElementById('calculator').classList.contains('active')) {
                const key = event.key;
                
                if (key >= '0' && key <= '9') {
                    appendNumber(key);
                } else if (key === '.') {
                    appendDecimal();
                } else if (key === '+' || key === '-' || key === '*' || key === '/') {
                    appendOperator(key);
                } else if (key === 'Enter' || key === '=') {
                    calculate();
                } else if (key === 'Escape' || key === 'c' || key === 'C') {
                    clearDisplay();
                } else if (key === '%') {
                    appendOperator('%');
                }
            }
        });
    </script>
</body>
</html>



















